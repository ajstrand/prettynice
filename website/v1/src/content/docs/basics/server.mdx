---
title: Server-side Responses
description: Responding to HTTP requests in Pretty Nice
---

import { Aside } from '@astrojs/starlight/components';

Every HTTP request to your site triggers a response from the server.
That response begins in `server/src/Main.gren`.
Let's look at the server generated by `prettynice init` in the [getting started guide](/basics/start/):

```elm
module Main exposing (main)

import Gen.Components.Counter
import Node exposing (Environment)
import Prettynice.SimpleRouter as Router
import Prettynice.Request exposing (Request)
import Prettynice.Response as Response exposing (Response)
import Transmutable.Html as H exposing (Html)
import Transmutable.Html.Attributes as A

main : Router.Program
main =
    Router.defineProgram
        { init = init
        , router = router
        }

init : Environment -> Router.Init
init env =
    Router.startProgram
        { host = "127.0.0.1"
        , port_ = 3000
        , env = env
        }

router : Request -> Response -> Cmd msg
router request response =
    case request.path of
        [] -> 
            response
                |> Response.sendHtml
                    { title = "My Website"
                    , head = [ linkStylesheet ]
                    , body = viewHomePage
                    }

        [ "hello", name ] ->
            response
                |> Response.sendText ("Hello, " ++ name)

        _ ->
            response
                |> Response.setStatus 404
                |> Response.sendText "Not found"

viewHomePage : Array (Html msg)
viewHomePage =
    [ H.h1 [] [ H.text "Welcome to my website!" ]
    , H.p [] [ H.text "I made this counter just for you." ]
    , Gen.Components.Counter.init { start = 0 }
    ]

linkStylesheet : Html msg
linkStylesheet =
    H.link [ A.rel "stylesheet", A.href "/styles.css" ]
```

<Aside>
    This module defines a [`Prettynice.SimpleRouter`](https://packages.gren-lang.org/package/blaix/prettynice/version/1.0.2/module/Prettynice.SimpleRouter).
    This is good enough for many things, even complicated client-side interactivity!
    But if you need more server-side control - to read or write files, talk to a database, use custom javascript, or do other things that can affect the state of the world outside your HTTP response - you can [define a full program](https://packages.gren-lang.org/package/blaix/prettynice/version/1.0.2/module/Prettynice#defineProgram) instead.
    If you want more information on full programs, you can jump ahead to [The Elm Architecture](/next/tea/).
</Aside>

Read on for a detailed breakdown and explanation of each part of this server module,
starting with the [module definition](#module-definition).

Or if it all makes sense, or you just want to get to the fun stuff, move on to the next section on [Client-side Components](/basics/client/).


## Module Definition

TODO

## Imports

TODO

## Define your Program

TODO

## Start your Program

TODO

## Route Requests

TODO

## Send HTML

TODO

## Initialize Components

TODO

## Assets and Styling

TODO
